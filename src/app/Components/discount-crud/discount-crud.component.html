<h2 class="card-header">{{"CrudDiscount"|translate}}</h2>
<div class="panel panel-default">
  <button (click)="updateDiscount(newDiscount, mymodal)" class="btn btn-primary">{{"AddDiscount"|translate}}</button>
  <p></p>
  <div class="panel-body">
    <table class="table table-sm text-white">
      <thead class="thead-light ">
      <tr class="h4">
        <th>{{"Category"|translate}}</th>
        <th>{{"Percentage"|translate}}</th>
        <th>{{"StartDate"|translate}}</th>
        <th>{{"EndDate"|translate}}</th>
        <th>{{"Action"|translate}}</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let discount of discounts ">
        <td>{{discount.category.name}}</td>
        <td>{{discount.percentage}}</td>
        <td>{{discount.startDate}}</td>
        <td>{{discount.endDate}}</td>
        <td>
          <button (click)="deleteDiscount(discount)" class='btn btn-danger'>{{"Delete"|translate}}</button>&nbsp;
          <button (click)="updateDiscount(discount, mymodal)" class='btn btn-success'>{{"Update"|translate}}</button>
        </td>
      </tr>
      </tbody>
      <br>
    </table>
  </div>
</div>

<ng-template #mymodal let-modal>
  <div class="modal-header">
    <h2 class="modal-title text-black" id="modal-basic-title">{{"DiscountProfile"|translate}}</h2>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body text-black">
    <h2 class="modal-title text-black" style="text-align: center">{{"UpdateSaveDiscount"|translate}}</h2>
    <form [formGroup]="form" (ngSubmit)="onSubmit()">

      <input type="hidden" class="form-control" formControlName="id" [value]="form.value.id">

      <div class="form-group">
        <label>{{"Category"|translate}}</label>
        <select class="form-control" formControlName="category" required>
          <option value="action" [selected]="'action' == form.value.category">ACTION</option>
          <option value="drama" [selected]="'drama' == form.value.category">DRAMA</option>
          <option value="thriller" [selected]="'thriller' == form.value.category">THRILLER</option>
        </select>
      </div>

      <div class="form-group">
        <label>{{"Percentage"|translate}}</label>
        <input type="text" class="form-control" formControlName="percentage" [value]="form.value.percentage">
      </div>

      <div class="form-group">
        <label>{{"StartDate"|translate}}</label>
        <input type="text" class="form-control" formControlName="startDate" [value]="form.value.startDate">
      </div>

      <div class="form-group">
        <label>{{"EndDate"|translate}}</label>
        <input type="text" class="form-control" formControlName="endDate" [value]="form.value.endDate">
      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <input type="submit" class="btn btn-success" value="{{'Save' | translate }}">
        <button type="button" class="btn btn-danger" data-dismiss="modal"
                (click)="modal.dismiss('Cross click')">{{"Close"|translate}}</button>
      </div>

    </form>
  </div>

</ng-template>

